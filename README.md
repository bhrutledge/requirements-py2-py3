# Managing requirements in Python 2 and 3 with pip-tools

Comparing [Tox](https://tox.readthedocs.io/) and [Nox](http://nox.thea.codes/), using a subset of requirements from an existing project.

```
$ pipx install tox
$ pipx install nox
```

Run the test suite in all environments:

```
$ tox
$ nox
```

Run the test suite in the Python 2.7 environment:

```
$ tox -e py27
$ nox -s test-2.7
```

List outdated dependencies in all environments:

```
$ tox -- pip list -o
$ nox -- pip list -o
```

Recompile requirements in all environments:

```
$ tox -c requirements
$ nox -s requirements
```

Upgrade a primary dependency:

- Add a minimal version specifier to a `requirements/*.in`
    - e.g. `flake8>=3.7` in `requirements/dev.in`
- Recompile requirements

Upgrade a transitive dependency:

- Remove it from all `requirements/*.txt`
- OR add it to a `requirements/*.in`
- Recompile requirements

However, this might not be necessary, because transitive dependencies should be upgraded as needed when a primary dependency is upgraded.

## Differences between Python 2 and Python 3

From `diff -u dev-py{27,37}.txt`:

```diff
--- dev-py27.txt        2019-05-28 16:36:20.000000000 -0400
+++ dev-py37.txt        2019-05-28 16:36:21.000000000 -0400
@@ -2,27 +2,25 @@
 # This file is autogenerated by pip-compile
 # To update, run:
 #
-#    pip-compile --output-file=dev-py27.txt base-py27.txt dev.in
+#    pip-compile --output-file=dev-py37.txt base-py37.txt dev.in
 #
 attrs==19.1.0
 certifi==2019.3.9
 chardet==3.0.4
-configparser==3.7.4       # via flake8
-enum34==1.1.6             # via flake8
+defusedxml==0.6.0
 flake8==3.5.0
-functools32==3.2.3.post2
 idna==2.8
 jsonschema==3.0.1
 mccabe==0.6.1             # via flake8
 numpy==1.16.3
 oauthlib==3.0.1
-pandas==0.19.2 ; python_version == "2.7"
+pandas==0.24.2 ; python_version > "3"
 pycodestyle==2.3.1        # via flake8
 pyflakes==1.6.0           # via flake8
 pyjwt==1.7.1
 pyrsistent==0.15.2
 python-dateutil==2.8.0
-python-openid==2.2.5
+python3-openid==3.1.0
 pytz==2019.1
 requests-oauthlib==1.2.0
 requests==2.22.0
```
